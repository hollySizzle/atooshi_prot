# Atooshi システム設計

## ユーザタイプ定義

| ユーザタイプ | 役割 | 価値提供 |
|------------|------|---------|
| **イノベーター** | プロジェクト起案・実行者 | アイデア・ビジョン・プロジェクト推進力 |
| **コミッター** | 実務遂行を提供する専門職・セカンドキャリア人材 | 専門スキル・経験・実行力（Execution） |
| **インベスター** | 資金提供者・協業パートナー | 資金・販路・アライアンス・ノウハウ |

---

## システムフロー（全体像）

```mermaid
sequenceDiagram
    participant システム as Atooshiシステム
    participant イノベーター
    participant コミッター
    participant インベスター
    participant 場 as 場（PARCO/BOOSTER）

    Note over システム,場: === Phase 0: Pre-Light（搾取排除の軽い参画） ===

    rect rgb(255, 240, 200)
        イノベーター->>システム: プロジェクト登録<br/>・アイデア/ビジョン<br/>・クリティカルパス定義<br/>・必要スキルの明示
        システム->>システム: プロジェクト審査<br/>・成果物/検収条件の確認<br/>・無償前提の禁止チェック
        システム->>コミッター: マッチング候補の通知<br/>（スキル・経験ベース）
        コミッター->>システム: 参画意思表示<br/>・タイムボックス（2〜6時間）<br/>・成果物の合意
        システム->>システム: 契約テンプレ適用<br/>・期待値/責任範囲<br/>・IP/守秘の最小テンプレ
        コミッター->>イノベーター: 実行の最小証拠を作成<br/>（試作/仕様/検証/運用計画）
        イノベーター->>システム: 成果物の検収
        システム->>コミッター: 報酬支払い<br/>・少額固定 or<br/>・Bounty Pool予約 or<br/>・次フェーズ優先権
    end

    Note over システム,場: === Phase 1: Light（購入型CF + 実務枠の確保） ===

    rect rgb(200, 230, 255)
        イノベーター->>システム: CFプロジェクト公開<br/>・ストーリー形成<br/>・使途明示（実務枠/製造/物流等）<br/>・Bounty Pool設定
        システム->>インベスター: プロジェクト公開通知<br/>・実行体制の可視化<br/>・成果物の明示
        インベスター->>システム: 支援/購入
        システム->>システム: CF成立判定
        alt CF成立
            システム->>システム: Bounty Pool確保<br/>（調達額から先に確保）
            システム->>コミッター: 実務タスク依頼<br/>・役割パッケージ提示<br/>・成果物/期限/報酬の明示
            コミッター->>イノベーター: 実務遂行<br/>（製造/納品/CS/法務/会計等）
            イノベーター->>システム: 成果物検収
            システム->>コミッター: Bounty Poolから支払い
        else CF不成立
            システム->>イノベーター: 改善フィードバック<br/>・再挑戦導線の提示
        end
    end

    Note over システム,場: === Phase 2: Middle（実務パッケージ + 場での検証） ===

    rect rgb(200, 255, 200)
        イノベーター->>場: テストマーケティング申請
        場->>場: 案件の目利き/磨き込み<br/>（編集力/キュレーション）
        場->>イノベーター: ポップアップ/期間限定出店
        場->>システム: 行動データ収集<br/>（リアル店舗トラフィック分析）
        システム->>イノベーター: データフィードバック<br/>・運用指標/納期/品質
        コミッター->>システム: 継続参画の意思表示
        システム->>システム: Boarding判定<br/>・週◯時間コミット合意<br/>・役割/責任分界<br/>・報酬形態確定
        システム->>コミッター: Boarding Track昇格<br/>（Candidate→Core→Boarding）
    end

    Note over システム,場: === Phase 3+: Heavy（投資型CF/企業連携への接続）[将来] ===

    rect rgb(230, 200, 255)
        システム->>インベスター: 実績プロジェクト送客<br/>（投資型CF/企業連携）
        インベスター->>イノベーター: 協業/アライアンス/投資
        Note over システム: 規制/審査を伴うためMVP後に実装
    end
```

---

## Phase別詳細フロー

### Phase 0: Pre-Light（プロジェクト立ち上げ・マッチング）

```mermaid
sequenceDiagram
    participant システム as Atooshiシステム
    participant イノベーター
    participant コミッター

    Note over システム: プロジェクト登録フロー

    イノベーター->>システム: 新規プロジェクト作成
    システム->>イノベーター: 入力フォーム表示<br/>・プロジェクト概要<br/>・解決したい課題<br/>・必要なスキル/人材
    イノベーター->>システム: クリティカルパス定義<br/>・フェーズ分解<br/>・各フェーズの成果物<br/>・検収条件
    システム->>システム: 審査チェック
    alt 成果物/検収条件が曖昧
        システム->>イノベーター: 修正依頼<br/>（ガードレール：掲載不可）
    else 条件クリア
        システム->>システム: プロジェクト公開
    end

    Note over システム: マッチングフロー

    システム->>システム: スキルマッチング実行<br/>・必要スキル × コミッター登録情報<br/>・実績/評価スコア考慮
    システム->>コミッター: マッチング候補通知
    コミッター->>システム: プロジェクト詳細閲覧
    コミッター->>システム: 参画申請<br/>・対応可能タイムボックス<br/>・期待報酬形態
    システム->>イノベーター: 申請者一覧表示
    イノベーター->>システム: コミッター選定
    システム->>システム: 契約テンプレ自動生成<br/>・タイムボックス<br/>・成果物定義<br/>・報酬形態<br/>・IP/守秘条項
    システム->>コミッター: 契約確認依頼
    コミッター->>システム: 契約合意
    システム->>イノベーター: 契約成立通知
```

### Phase 1: Light（購入型CF + Bounty Pool管理）

```mermaid
sequenceDiagram
    participant システム as Atooshiシステム
    participant イノベーター
    participant コミッター
    participant インベスター

    Note over システム: CF準備フロー

    イノベーター->>システム: CFプロジェクト設定<br/>・目標金額<br/>・リターン設計<br/>・使途内訳
    システム->>イノベーター: Bounty Pool設定<br/>（実務枠の予算確保）
    イノベーター->>システム: 使途明細登録<br/>・実務枠: XX万円<br/>・製造費: XX万円<br/>・物流費: XX万円
    システム->>システム: プロジェクトページ生成<br/>・実行体制の可視化<br/>・コミッター参画状況表示

    Note over システム: CF実行フロー

    システム->>インベスター: プロジェクト公開
    インベスター->>システム: プロジェクト閲覧<br/>・実行体制確認<br/>・使途確認
    インベスター->>システム: 支援/購入
    システム->>システム: 進捗トラッキング

    alt 目標達成
        システム->>システム: CF成立処理
        システム->>システム: Bounty Pool確定<br/>（調達額から先に確保）
        システム->>イノベーター: 成立通知
        システム->>インベスター: 成立通知
        システム->>コミッター: 実務開始通知
    else 目標未達
        システム->>イノベーター: 不成立通知<br/>・振り返りレポート<br/>・改善提案<br/>・再挑戦導線
    end

    Note over システム: 実務遂行・検収フロー

    コミッター->>システム: 進捗報告
    システム->>イノベーター: 進捗ダッシュボード更新
    コミッター->>システム: 成果物提出
    イノベーター->>システム: 検収判定
    alt 検収OK
        システム->>コミッター: Bounty Poolから支払い
        システム->>システム: 実績記録<br/>（評価スコア更新）
    else 検収NG
        システム->>コミッター: 修正依頼
    end
```

### Phase 2: Middle（テストマーケティング + Boarding昇格）

```mermaid
sequenceDiagram
    participant システム as Atooshiシステム
    participant イノベーター
    participant コミッター
    participant 場 as 場（PARCO/BOOSTER）

    Note over システム: テストマーケティングフロー

    イノベーター->>システム: テストマーケ申請
    システム->>場: 案件紹介
    場->>場: 目利き/審査<br/>・商品力<br/>・話題性<br/>・実行体制
    場->>システム: 受入判定

    alt 受入OK
        場->>イノベーター: 出店条件提示<br/>・期間<br/>・場所<br/>・条件
        イノベーター->>場: 合意
        場->>場: ポップアップ/期間限定出店実施
        場->>システム: 行動データ送信<br/>・来店数<br/>・滞在時間<br/>・購買転換率
        システム->>イノベーター: データ分析レポート
        システム->>システム: 成功テンプレ蓄積
    else 受入NG
        場->>イノベーター: 改善フィードバック
    end

    Note over システム: Boarding昇格フロー

    システム->>システム: コミッター評価計算<br/>・継続期間<br/>・KPI達成率<br/>・品質評価

    alt Candidate条件達成
        Note right of コミッター: 成果物1〜2本＋レビューA
        システム->>コミッター: Candidate昇格通知
    end

    alt Core条件達成
        Note right of コミッター: 継続2ヶ月＋KPI達成
        システム->>コミッター: Core昇格通知
        システム->>イノベーター: Coreメンバー追加通知
    end

    alt Boarding条件達成
        Note right of コミッター: 週◯時間コミット合意
        システム->>コミッター: Boarding契約提示<br/>・役割/責任分界<br/>・報酬形態確定
        コミッター->>システム: Boarding契約合意
        システム->>イノベーター: Boardingメンバー化通知
    end
```

---

## データモデル概要

```mermaid
erDiagram
    USER ||--o{ PROJECT : creates
    USER ||--o{ COMMITMENT : makes
    USER ||--o{ INVESTMENT : makes
    USER {
        string id PK
        enum userType "イノベーター/コミッター/インベスター"
        string name
        string email
        json skills
        json experience
        float rating
    }

    PROJECT ||--o{ CRITICAL_PATH : has
    PROJECT ||--o{ BOUNTY_POOL : has
    PROJECT ||--o{ CF_CAMPAIGN : has
    PROJECT {
        string id PK
        string innovatorId FK
        string title
        string description
        enum phase "PreLight/Light/Middle/Heavy"
        enum status "draft/review/active/completed"
        datetime createdAt
    }

    CRITICAL_PATH ||--o{ DELIVERABLE : contains
    CRITICAL_PATH {
        string id PK
        string projectId FK
        int order
        string phaseName
        string description
    }

    DELIVERABLE ||--o{ ACCEPTANCE : has
    DELIVERABLE {
        string id PK
        string criticalPathId FK
        string title
        string acceptanceCriteria
        int timeboxHours
        decimal reward
        enum status "pending/inProgress/submitted/accepted/rejected"
    }

    COMMITMENT ||--o{ DELIVERABLE : fulfills
    COMMITMENT {
        string id PK
        string committerId FK
        string projectId FK
        enum track "Task/Boarding"
        enum level "Candidate/Core/Boarding"
        datetime startedAt
    }

    BOUNTY_POOL ||--o{ PAYMENT : funds
    BOUNTY_POOL {
        string id PK
        string projectId FK
        decimal totalAmount
        decimal allocatedAmount
        decimal paidAmount
    }

    CF_CAMPAIGN ||--o{ INVESTMENT : receives
    CF_CAMPAIGN {
        string id PK
        string projectId FK
        decimal goalAmount
        decimal currentAmount
        datetime startDate
        datetime endDate
        enum status "draft/active/succeeded/failed"
    }

    INVESTMENT {
        string id PK
        string investorId FK
        string campaignId FK
        decimal amount
        string returnType
        datetime createdAt
    }

    PAYMENT {
        string id PK
        string bountyPoolId FK
        string committerId FK
        string deliverableId FK
        decimal amount
        enum status "pending/completed"
        datetime paidAt
    }

    ACCEPTANCE {
        string id PK
        string deliverableId FK
        string reviewerId FK
        enum result "accepted/rejected"
        string feedback
        datetime reviewedAt
    }
```

---

## トラック設計

### Boarding Track（主役）

```mermaid
stateDiagram-v2
    [*] --> Entry: 参画申請
    Entry --> Candidate: 成果物1〜2本＋レビューA
    Candidate --> Core: 継続2ヶ月＋KPI達成
    Core --> Boarding: 週◯時間コミット合意
    Boarding --> Cxx: [将来] SO等の長期インセンティブ

    Entry --> Task: 単発タスク希望
    Task --> Entry: 継続参画希望
    Task --> [*]: タスク完了のみ

    state Entry {
        月10万円程度の軽い副業/インターン枠
    }

    state Boarding {
        役割/責任分界確定
        報酬形態確定
    }
```

### Task Track（補助輪）

```mermaid
flowchart LR
    A[タスク登録] --> B{成果物/検収条件<br/>明確か？}
    B -->|Yes| C[タスク公開]
    B -->|No| D[掲載不可<br/>明確化依頼]
    C --> E[コミッター申請]
    E --> F[タスク遂行]
    F --> G[成果物検収]
    G -->|OK| H[支払い完了]
    G -->|NG| I[修正依頼]
    H --> J{Boarding希望？}
    J -->|Yes| K[Boarding Track移行]
    J -->|No| L[完了]
```

---

## ガードレール（事故防止機構）

| ガードレール | 対象 | チェックポイント |
|-------------|------|-----------------|
| 成果物明確性チェック | プロジェクト登録時 | 成果物・検収条件が曖昧な案件は掲載不可 |
| 無償前提禁止 | Phase 0 | 0フェーズでの無償稼働を禁止（最小化し明確合意） |
| 雇用化防止 | 全Phase | 指示命令・勤怠管理をプラットフォームが持ちすぎない |
| 使途明示義務 | Phase 1 CF | 支援者に使途と成果物を明示 |
| タイムボックス必須 | Phase 0 マッチング | 2〜6時間のタイムボックスと成果物を必ず定義 |
| 契約テンプレ強制 | 全契約 | 期待値・責任範囲・IP・守秘の最小テンプレを適用 |

---

## 成功の定義

1. **事業化マイルストーン達成**: 資金調達ではなく、納品/運用開始/継続売上の達成
2. **Boardingメンバー化**: コミッターの継続参画の成立
3. **成功テンプレの蓄積**: 再現可能なパターンの蓄積（次案件の成功確度向上）
4. **エコシステム形成**: 成長ベンチャー → 新ベンチャーへの循環（投資/参画の還流）
